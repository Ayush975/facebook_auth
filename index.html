<!DOCTYPE html>
<html>
  <head>
    <script
      async
      defer
      crossorigin="anonymous"
      src="https://connect.facebook.net/en_US/sdk.js"
      onload="initClient()"
    ></script>
  </head>
  <body>
    <script>
      var client;
      function initClient() {
        console.log("init client");
        window.fbAsyncInit = function () {
          FB.init({
            appId: "59563e90da7c30c763bc28e2d272e5a1",
            cookie: true,
            xfbml: true,
            version: "v14.0",
          });

          FB.AppEvents.logPageView();
        };
      }
      function statusChangeCallback(response) {
        if (response.status === "connected") {
          console.log("Logged in and authenticated");
          setElements(true);
          testAPI();
        } else {
          console.log("Not authenticated");
          setElements(false);
        }
      }
      function getAuthCode() {
        // Request authorization code and obtain user consent
        console.log("fired", FB);
        FB.getLoginStatus(function (response) {
          statusChangeCallback(response);
        });
        (function (d, s, id) {
          var js,
            fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) {
            return;
          }
          js = d.createElement(s);
          js.id = id;
          js.src = "https://connect.facebook.net/en_US/sdk.js";
          fjs.parentNode.insertBefore(js, fjs);
        })(document, "script", "facebook-jssdk");
      }
    </script>
    <button onclick="getAuthCode()">authencation</button>
  </body>
</html>
